---
import DocLayout from "../../layouts/DocLayout.astro";
import Heading from "../../components/docs/Heading.astro";
import ComponentSection from "../../components/docs/ComponentSection.astro";
import ComponentExample from "../../components/docs/ComponentExample.astro";
import CodeBlock from "../../components/docs/CodeBlock.astro";
import PropsTable from "../../components/docs/PropsTable.astro";
import {
  ButtonBasicDemo,
  ButtonPrimaryDemo,
  ButtonSecondaryDemo,
  ButtonGhostDemo,
  ButtonDestructiveDemo,
  ButtonOutlineDemo,
  ButtonSecondaryDestructiveDemo,
  ButtonSizesDemo,
  ButtonWithIconDemo,
  ButtonIconOnlyDemo,
  ButtonLoadingDemo,
  ButtonDisabledDemo,
  ButtonAsLinkDemo,
  ButtonAsLinkVariantsDemo,
  ButtonRenderCallbackDemo,
} from "../../components/demos/ButtonDemo";
---

<DocLayout
  title="Button"
  description="Displays a button or a component that looks like a button."
  sourceFile="components/button"
>
  <!-- Demo -->
  <ComponentSection>
    <ComponentExample
      code={`<Button variant="secondary">Button</Button>
<Button variant="secondary" shape="square" icon={PlusIcon} />`}
    >
      <ButtonBasicDemo client:visible />
    </ComponentExample>
  </ComponentSection>

  <!-- Installation -->
  <ComponentSection>
    <Heading level={2}>Installation</Heading>
    <Heading level={3} class="mb-2 text-lg">Barrel</Heading>
    <CodeBlock code={`import { Button } from "@cloudflare/kumo";`} lang="tsx" />
    <Heading level={3} class="mb-2 mt-4 text-lg">Granular</Heading>
    <CodeBlock
      code={`import { Button } from "@cloudflare/kumo/components/button";`}
      lang="tsx"
    />
  </ComponentSection>

  <!-- Usage -->
  <ComponentSection>
    <Heading level={2}>Usage</Heading>
    <CodeBlock
      code={`import { Button } from "@cloudflare/kumo";

export default function Example() {
  return <Button variant="secondary">Click me</Button>;
}`}
      lang="tsx"
    />
  </ComponentSection>

  <!-- Examples -->
  <ComponentSection>
    <Heading level={2} class="mb-6">Examples</Heading>

    <!-- Variants -->
    <div class="mb-12">
      <Heading level={3}>Variants</Heading>

      <div class="space-y-8">
        <div>
          <h4 class="mb-3 text-base font-medium">Primary</h4>
          <ComponentExample code={`<Button variant="primary">Primary</Button>`}>
            <ButtonPrimaryDemo client:visible />
          </ComponentExample>
        </div>

        <div>
          <h4 class="mb-3 text-base font-medium">Secondary</h4>
          <ComponentExample
            code={`<Button variant="secondary">Secondary</Button>`}
          >
            <ButtonSecondaryDemo client:visible />
          </ComponentExample>
        </div>

        <div>
          <h4 class="mb-3 text-base font-medium">Ghost</h4>
          <ComponentExample code={`<Button variant="ghost">Ghost</Button>`}>
            <ButtonGhostDemo client:visible />
          </ComponentExample>
        </div>

        <div>
          <h4 class="mb-3 text-base font-medium">Destructive</h4>
          <ComponentExample
            code={`<Button variant="destructive">Destructive</Button>`}
          >
            <ButtonDestructiveDemo client:visible />
          </ComponentExample>
        </div>

        <div>
          <h4 class="mb-3 text-base font-medium">Outline</h4>
          <ComponentExample code={`<Button variant="outline">Outline</Button>`}>
            <ButtonOutlineDemo client:visible />
          </ComponentExample>
        </div>

        <div>
          <h4 class="mb-3 text-base font-medium">Secondary Destructive</h4>
          <ComponentExample
            code={`<Button variant="secondary-destructive">Secondary Destructive</Button>`}
          >
            <ButtonSecondaryDestructiveDemo client:visible />
          </ComponentExample>
        </div>
      </div>
    </div>

    <!-- Sizes -->
    <div class="mb-12">
      <Heading level={3}>Sizes</Heading>
      <ComponentExample
        code={`<Button size="xs" variant="secondary">Extra Small</Button>
<Button size="sm" variant="secondary">Small</Button>
<Button size="base" variant="secondary">Base</Button>
<Button size="lg" variant="secondary">Large</Button>`}
      >
        <ButtonSizesDemo client:visible />
      </ComponentExample>
    </div>

    <!-- With Icon -->
    <div class="mb-12">
      <Heading level={3}>With Icon</Heading>
      <ComponentExample
        code={`<Button variant="secondary" icon={PlusIcon}>
  Create Worker
</Button>`}
      >
        <ButtonWithIconDemo client:visible />
      </ComponentExample>
    </div>

    <!-- Icon Only -->
    <div class="mb-12">
      <Heading level={3}>Icon Only</Heading>
      <ComponentExample
        code={`<Button variant="secondary" shape="square" icon={PlusIcon} />
<Button variant="secondary" shape="circle" icon={PlusIcon} />`}
      >
        <ButtonIconOnlyDemo client:visible />
      </ComponentExample>
    </div>

    <!-- Loading State -->
    <div class="mb-12">
      <Heading level={3}>Loading State</Heading>
      <ComponentExample
        code={`<Button variant="primary" loading>
  Loading...
</Button>`}
      >
        <ButtonLoadingDemo client:visible />
      </ComponentExample>
    </div>

    <!-- Disabled State -->
    <div class="mb-12">
      <Heading level={3}>Disabled State</Heading>
      <ComponentExample
        code={`<Button variant="secondary" disabled>
  Disabled
</Button>`}
      >
        <ButtonDisabledDemo client:visible />
      </ComponentExample>
    </div>
  </ComponentSection>

  <!-- Composition / Polymorphism -->
  <ComponentSection>
    <Heading level={2} class="mb-6">Composition</Heading>
    <p class="mb-6 text-kumo-subtle">
      The Button component supports polymorphism via the <code class="bg-kumo-recessed px-1.5 py-0.5 rounded text-sm">render</code> prop,
      allowing you to render it as a different element (like an anchor) or compose it with routing libraries
      like React Router or Next.js Link.
    </p>

    <!-- As a Link -->
    <div class="mb-12">
      <Heading level={3}>As a Link</Heading>
      <p class="mb-4 text-kumo-subtle">
        Render the button as an anchor element for external links or standard navigation.
      </p>
      <ComponentExample
        code={`<Button
  render={<a href="https://cloudflare.com" target="_blank" rel="noopener noreferrer" />}
  variant="primary"
>
  Visit Cloudflare
  <ArrowUpRight className="ml-1" />
</Button>`}
      >
        <ButtonAsLinkDemo client:visible />
      </ComponentExample>
    </div>

    <!-- With Different Variants -->
    <div class="mb-12">
      <Heading level={3}>Link Variants</Heading>
      <p class="mb-4 text-kumo-subtle">
        All button variants work seamlessly with the render prop.
      </p>
      <ComponentExample
        code={`<Button render={<a href="#primary" />} variant="primary">
  Primary Link
</Button>
<Button render={<a href="#secondary" />} variant="secondary">
  Secondary Link
</Button>
<Button render={<a href="#ghost" />} variant="ghost">
  Ghost Link
</Button>`}
      >
        <ButtonAsLinkVariantsDemo client:visible />
      </ComponentExample>
    </div>

    <!-- With React Router -->
    <div class="mb-12">
      <Heading level={3}>With React Router</Heading>
      <p class="mb-4 text-kumo-subtle">
        Compose with React Router's <code class="bg-kumo-recessed px-1.5 py-0.5 rounded text-sm">Link</code> for client-side navigation.
      </p>
      <CodeBlock
        code={`import { Link } from 'react-router-dom';

<Button render={<Link to="/dashboard" />} variant="primary">
  Go to Dashboard
</Button>`}
        lang="tsx"
      />
    </div>

    <!-- With Next.js Link -->
    <div class="mb-12">
      <Heading level={3}>With Next.js</Heading>
      <p class="mb-4 text-kumo-subtle">
        Compose with Next.js <code class="bg-kumo-recessed px-1.5 py-0.5 rounded text-sm">Link</code> for optimized navigation.
      </p>
      <CodeBlock
        code={`import Link from 'next/link';

<Button render={<Link href="/about" />} variant="secondary">
  About Us
</Button>`}
        lang="tsx"
      />
    </div>

    <!-- Render Callback -->
    <div class="mb-12">
      <Heading level={3}>Render Callback</Heading>
      <p class="mb-4 text-kumo-subtle">
        For advanced use cases, pass a function to access props and state for conditional rendering.
      </p>
      <ComponentExample
        code={`<Button
  loading={false}
  render={(props, state) => (
    <a {...props} href="#callback">
      {state.loading ? "Loading..." : "Render Callback"}
    </a>
  )}
  variant="secondary"
/>`}
      >
        <ButtonRenderCallbackDemo client:visible />
      </ComponentExample>
      <p class="mt-4 text-sm text-kumo-subtle">
        The callback receives <code class="bg-kumo-recessed px-1 py-0.5 rounded">props</code> (to spread on your element)
        and <code class="bg-kumo-recessed px-1 py-0.5 rounded">state</code> (containing <code class="bg-kumo-recessed px-1 py-0.5 rounded">loading</code> and <code class="bg-kumo-recessed px-1 py-0.5 rounded">disabled</code>).
      </p>
    </div>

    <!-- Important Notes -->
    <div class="mb-12 rounded-lg border border-kumo-line bg-kumo-elevated p-4">
      <Heading level={3} class="mb-2 text-base">Important Notes</Heading>
      <ul class="list-inside list-disc space-y-2 text-sm text-kumo-subtle">
        <li>The custom element must forward refs and spread all received props on its DOM node.</li>
        <li>Button styles, loading states, and disabled states are automatically applied to the rendered element.</li>
        <li>Use <code class="bg-kumo-recessed px-1 py-0.5 rounded">LinkButton</code> if you need a simpler API for basic link buttons without framework-specific routing.</li>
      </ul>
    </div>
  </ComponentSection>

  <!-- API Reference -->
  <ComponentSection>
    <Heading level={2}>API Reference</Heading>
    <PropsTable component="Button" />
  </ComponentSection>
</DocLayout>
